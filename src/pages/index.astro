---
import Layout from "../layouts/Layout.astro";
import WaitlistForm from "../components/WaitlistForm.tsx";
import CalendarPreview from "../components/CalendarPreview.tsx";

const now = new Date();
const year = now.getFullYear();
---

<Layout title="Cathrin — Calendar for people who care">
  <div class="min-h-screen flex flex-col overflow-x-clip">
    <!-- Hero: text left, calendar right -->
    <main class="flex-1 flex items-center">
      <div class="hero-grid">
        <!-- Left: copy + waitlist -->
        <div class="hero-left">
          <h1
            class="text-[clamp(2.5rem,5vw,5rem)] leading-[1.15] font-medium tracking-[-0.02em]"
          >
            We build<br />a calendar app<span class="text-primary">.</span>
          </h1>

          <p class="mt-6 text-lg text-dark/70 max-w-md">
            And we gave it a mascot named Cathrin <img src="/cathrin.gif" class="h-10 ml-0.5 pb-2.5 inline-block" alt="Cathrin mascot"/>
          </p>

          <div class="mt-8">
            <WaitlistForm client:load />
          </div>
        </div>

        <!-- Right: calendar with perspective, 1/3 off right edge -->
        <div class="hero-right">
          <div class="calendar-perspective">
            <div class="calendar-transform">
              <CalendarPreview client:only="solid-js" />
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="px-6 md:px-10 lg:px-16 py-5 border-t border-dark/10">
      <div
        class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 text-[13px] text-dark/50"
      >
        <a href="/" class="hover:text-dark transition-colors">&copy; {year} Cathrin</a>

        <nav class="flex gap-4">
          <a href="/imprint" class="hover:text-dark transition-colors"
            >Imprint</a
          >
          <a href="/privacy" class="hover:text-dark transition-colors"
            >Privacy</a
          >
        </nav>

        <a
          href="mailto:hey@cathrin.ai"
          aria-label="Email"
          class="hover:text-dark transition-colors"
        >
          hey@cathrin.ai
        </a>
      </div>
    </footer>
  </div>

  <style>
    .hero-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1.2fr);
      align-items: center;
      width: 100%;
      min-height: 80vh;
    }

    .hero-left {
      padding: 4rem 2rem 4rem clamp(1.5rem, 4vw, 4rem);
    }

    .hero-right {
      position: relative;
      overflow: visible;
    }

    .calendar-perspective {
      perspective: 1800px;
      perspective-origin: 20% 50%;
    }

    .calendar-transform {
      /* Extend 1/3 off the right edge */
      width: calc(100% + 33vw);
      padding-right: 1rem;

      /* 3D tilt — right edge recedes, left comes forward (opposite direction) */
      transform: rotateY(-16deg) rotateX(3deg);
      transform-origin: 35% 50%;

      /* Sharper rasterization without breaking hit-testing */
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      -webkit-font-smoothing: antialiased;
    }

    /* Stack vertically on small screens */
    @media (max-width: 1024px) {
      .hero-grid {
        grid-template-columns: 1fr;
        min-height: auto;
      }

      .hero-left {
        padding: 6rem 1.5rem 2rem;
      }

      .hero-right {
        padding: 2rem 0 3rem;
      }

      .calendar-transform {
        width: calc(100% + 20vw);
        transform: rotateY(-14deg) rotateX(2deg);
      }
    }
  </style>
</Layout>
